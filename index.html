<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LFHC Visitor Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body { 
            width: 100vw; 
            height: 100vh; 
            overflow: hidden; 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #6FB03B 0%, #8BC34A 50%, #9CCC65 100%); 
            color: white; 
        }
        
        .header { 
            text-align: center; 
            padding: 10px 15px 8px; 
            background: rgba(255, 255, 255, 0.15); 
            backdrop-filter: blur(10px); 
        }
        
        .logo-container { 
            display: inline-flex; 
            align-items: center; 
            gap: 10px; 
            background: white; 
            padding: 8px 15px; 
            border-radius: 10px; 
            margin-bottom: 8px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); 
        }
        
        .logo-heart { width: 35px; height: 35px; }
        .logo-text { text-align: left; }
        .logo-lao { font-size: 9px; color: #333; margin: 0; line-height: 1.2; }
        .logo-en { font-size: 11px; color: #333; font-weight: 600; margin: 0; letter-spacing: 0.5px; }
        
        .header h1 { 
            font-size: 1.8rem; 
            font-weight: 400; 
            letter-spacing: 1px; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); 
            margin-bottom: 3px; 
        }
        
        .header p { font-size: 0.95rem; opacity: 0.95; font-weight: 300; }
        
        .menu-container { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
            padding: 20px 30px 25px; 
            max-width: 100vw; 
            margin: 0 auto; 
            height: calc(100vh - 140px); 
        }
        
        .tile { 
            position: relative; 
            border-radius: 15px; 
            padding: 25px 15px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border: none; 
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); 
            overflow: hidden; 
            background-size: cover; 
            background-position: center center; 
            background-repeat: no-repeat; 
        }
        
        .tile::before { 
            content: ''; 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, rgba(111, 176, 59, 0.85) 0%, rgba(139, 195, 74, 0.75) 100%); 
            transition: all 0.4s ease; 
            z-index: 1; 
        }
        
        .tile:hover::before { opacity: 0.3; }
        .tile:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); }
        
        .tile-content { position: relative; z-index: 2; text-align: center; transition: opacity 0.3s ease; }
        .tile:hover .tile-content { opacity: 0; }
        
        .tile-icon { 
            font-size: 3rem; 
            margin-bottom: 12px; 
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); 
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)); 
        }
        
        .tile-title { 
            font-size: 1.1rem; 
            font-weight: 500; 
            line-height: 1.3; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); 
        }
        
        .video-container { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: #000; 
            z-index: 999999; 
        }
        
        .video-container.active { display: block; }
        
        .video-wrapper { 
            width: 100%; 
            height: 100%; 
            position: relative; 
        }
        
        .video-wrapper iframe { 
            width: 100%; 
            height: 100%; 
            border: none; 
            position: absolute; 
            top: 0; 
            left: 0; 
        }
        
        /* BOUTON BACK - AU-DESSUS DE TOUT MAIS CACHÉ PAR DÉFAUT */
        .back-button { 
            position: fixed !important;
            top: 20px !important;
            left: 20px !important;
            background: rgba(111, 176, 59, 0.95) !important;
            border: 3px solid white !important;
            color: white !important;
            padding: 12px 28px !important;
            font-size: 1.1rem !important;
            font-weight: 600 !important;
            border-radius: 50px !important;
            cursor: pointer !important;
            z-index: 99999999 !important; /* ULTRA ÉLEVÉ - au-dessus des overlays */
            font-family: 'Poppins', sans-serif !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
            display: none !important; /* CACHÉ PAR DÉFAUT */
            align-items: center !important;
            gap: 10px !important;
            pointer-events: auto !important;
            opacity: 1 !important;
            transition: opacity 0.5s ease !important;
        }
        
        .back-button.active {
            display: flex !important; /* Visible seulement quand vidéo active */
        }
        
        .back-button.hidden {
            opacity: 0 !important; /* Transparent mais toujours là */
            pointer-events: none !important; /* Non cliquable quand caché */
        }
        
        .back-button:hover { 
            background: rgba(139, 195, 74, 1) !important;
            transform: scale(1.05) !important;
        }
        
        /* OVERLAY SYSTÈME ULTRA-MASSIF - Couvre 95% de l'écran */
        .youtube-overlay-master {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 50000000 !important; /* En-dessous du bouton Back mais au-dessus de YouTube */
            pointer-events: none !important;
            display: none;
        }
        
        .youtube-overlay-master.active {
            display: block !important;
        }
        
        /* OVERLAY TOP - 35% de la hauteur */
        .overlay-top {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 35% !important;
            background: transparent !important;
            pointer-events: auto !important;
            z-index: 50000001 !important;
        }
        
        /* OVERLAY BOTTOM - 35% de la hauteur */
        .overlay-bottom {
            position: absolute !important;
            bottom: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 35% !important;
            background: transparent !important;
            pointer-events: auto !important;
            z-index: 50000001 !important;
        }
        
        /* OVERLAY LEFT - 30% de la largeur */
        .overlay-left {
            position: absolute !important;
            top: 35% !important;
            left: 0 !important;
            width: 30% !important;
            height: 30% !important;
            background: transparent !important;
            pointer-events: auto !important;
            z-index: 50000001 !important;
        }
        
        /* OVERLAY RIGHT - 30% de la largeur */
        .overlay-right {
            position: absolute !important;
            top: 35% !important;
            right: 0 !important;
            width: 30% !important;
            height: 30% !important;
            background: transparent !important;
            pointer-events: auto !important;
            z-index: 50000001 !important;
        }
        
        /* ZONE CENTRALE LIBRE : 40% largeur × 30% hauteur au centre */
        /* Cette petite zone reste cliquable pour play/pause */
        
        .play-overlay { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            width: 70px; 
            height: 70px; 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            opacity: 0; 
            transition: opacity 0.3s ease; 
            z-index: 3; 
            pointer-events: none; 
        }
        
        .tile:hover .play-overlay { opacity: 1; }
        
        .play-icon { 
            width: 0; 
            height: 0; 
            border-left: 22px solid #6FB03B; 
            border-top: 13px solid transparent; 
            border-bottom: 13px solid transparent; 
            margin-left: 6px; 
        }
        
        @media (max-width: 1200px) { 
            .menu-container { grid-template-columns: repeat(2, 1fr); } 
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <img src="https://images.squarespace-cdn.com/content/v1/6059e881e22c8042fb31c88f/1617460128427-P4LWJQ12JUQ0WMEITJ69/FWAB_Heart.png" alt="LFHC Heart" class="logo-heart">
            <div class="logo-text">
                <p class="logo-lao">ໂຮງໝໍເດັກລາວອາມິດພື້ນເມືອງລາວ</p>
                <p class="logo-en">LAO FRIENDS HOSPITAL FOR CHILDREN</p>
            </div>
        </div>
        <h1>Visitor Center</h1>
        <p>Choose a video to learn more</p>
    </div>
    
    <div class="menu-container" id="mainMenu"></div>
    
    <div class="video-container" id="videoContainer">
        <div class="video-wrapper" id="videoPlayer"></div>
    </div>
    
    <!-- BOUTON BACK - Séparé pour être AU-DESSUS de tout -->
    <button class="back-button" id="backButton" onclick="closeVideo()">
        <i class="fas fa-arrow-left"></i>
        <span>Back to Menu</span>
    </button>
    
    <!-- OVERLAYS MASSIFS - En-dessous du bouton Back -->
    <div class="youtube-overlay-master" id="overlayMaster">
        <div class="overlay-top"></div>
        <div class="overlay-bottom"></div>
        <div class="overlay-left"></div>
        <div class="overlay-right"></div>
    </div>
    
    <!-- YouTube IFrame Player API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <script>
        const videoCategories = [
            { title: "Discover LFHC", icon: "fa-solid fa-hospital", youtubeId: "dQw4w9WgXcQ" },
            { title: "Family Testimonials", icon: "fa-solid fa-heart", youtubeId: "9bZkp7q19f0" },
            { title: "Our Medical Team", icon: "fa-solid fa-user-doctor", youtubeId: "jNQXAC9IVRw" },
            { title: "Prevention & Education", icon: "fa-solid fa-book-medical", youtubeId: "yPYZpwSpKmA" },
            { title: "Our Programs", icon: "fa-solid fa-star", youtubeId: "kJQP7kiw5Fk" },
            { title: "Partners & Support", icon: "fa-solid fa-handshake", youtubeId: "ZZ5LpwO-An4" }
        ];
        
        let currentPlayer = null;
        let playerReady = false;
        let backButtonTimer = null; // Timer pour cacher le bouton
        const BACK_BUTTON_DELAY = 4000; // 4 secondes avant de cacher
        
        // Fonction pour afficher le bouton Back
        function showBackButton() {
            const backButton = document.getElementById('backButton');
            if (!backButton.classList.contains('active')) return; // Ne fonctionne que si vidéo active
            
            backButton.classList.remove('hidden');
            
            // Réinitialise le timer
            clearTimeout(backButtonTimer);
            backButtonTimer = setTimeout(() => {
                backButton.classList.add('hidden');
            }, BACK_BUTTON_DELAY);
        }
        
        // Fonction pour cacher immédiatement le bouton
        function hideBackButton() {
            const backButton = document.getElementById('backButton');
            backButton.classList.add('hidden');
            clearTimeout(backButtonTimer);
        }
        
        function onYouTubeIframeAPIReady() {
            playerReady = true;
        }
        
        function generateTiles() {
            const container = document.getElementById('mainMenu');
            videoCategories.forEach((cat, i) => {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.onclick = () => playVideo(i);
                tile.style.backgroundImage = `url('https://img.youtube.com/vi/${cat.youtubeId}/maxresdefault.jpg')`;
                tile.innerHTML = `<div class="tile-content"><div class="tile-icon"><i class="${cat.icon}"></i></div><div class="tile-title">${cat.title}</div></div><div class="play-overlay"><div class="play-icon"></div></div>`;
                container.appendChild(tile);
            });
        }
        
        function playVideo(index) {
            const container = document.getElementById('videoContainer');
            const player = document.getElementById('videoPlayer');
            const overlayMaster = document.getElementById('overlayMaster');
            const backButton = document.getElementById('backButton');
            const youtubeId = videoCategories[index].youtubeId;
            
            player.innerHTML = '<div id="youtube-player"></div>';
            container.classList.add('active');
            overlayMaster.classList.add('active');
            backButton.classList.add('active'); // Utilise classe active
            
            // Affiche le bouton au démarrage, puis le cache après 4 secondes
            showBackButton();
            
            currentPlayer = new YT.Player('youtube-player', {
                height: '100%',
                width: '100%',
                videoId: youtubeId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 1,
                    'disablekb': 1,
                    'fs': 0,
                    'modestbranding': 1,
                    'rel': 0,
                    'showinfo': 0,
                    'iv_load_policy': 3,
                    'cc_load_policy': 0,
                    'playsinline': 1,
                    'enablejsapi': 1,
                    'origin': window.location.origin
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        function onPlayerReady(event) {
            event.target.playVideo();
            
            // Force 1080p
            event.target.setPlaybackQuality('hd1080');
            setTimeout(() => {
                event.target.setPlaybackQuality('highres');
            }, 1000);
        }
        
        function onPlayerStateChange(event) {
            if (event.data === 0) {
                setTimeout(() => {
                    closeVideo();
                }, 500);
            }
        }
        
        function closeVideo() {
            const container = document.getElementById('videoContainer');
            const player = document.getElementById('videoPlayer');
            const overlayMaster = document.getElementById('overlayMaster');
            const backButton = document.getElementById('backButton');
            
            if (currentPlayer && currentPlayer.destroy) {
                currentPlayer.destroy();
                currentPlayer = null;
            }
            
            // Nettoie le timer
            clearTimeout(backButtonTimer);
            
            container.classList.remove('active');
            overlayMaster.classList.remove('active');
            backButton.classList.remove('active'); // Enlève classe active
            backButton.classList.remove('hidden'); // Enlève hidden aussi
            player.innerHTML = '';
        }
        
        // Bloque toutes les touches de navigation
        document.addEventListener('keydown', (e) => {
            const videoActive = document.getElementById('videoContainer').classList.contains('active');
            
            if (e.key === 'Escape') {
                closeVideo();
                return;
            }
            
            if (videoActive) {
                // Affiche le bouton Back lors de n'importe quelle touche
                showBackButton();
                
                // Bloque les touches de navigation vidéo
                if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', ' ', 'Home', 'End', 'PageUp', 'PageDown'].includes(e.key)) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    return false;
                }
            }
        }, true);
        
        // Bloque aussi les événements keyup
        document.addEventListener('keyup', (e) => {
            const videoActive = document.getElementById('videoContainer').classList.contains('active');
            if (videoActive) {
                if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', ' ', 'Home', 'End', 'PageUp', 'PageDown'].includes(e.key)) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    return false;
                }
            }
        }, true);
        
        // Détecte mouvement de souris/pointeur pour afficher le bouton
        document.addEventListener('mousemove', (e) => {
            const videoActive = document.getElementById('videoContainer').classList.contains('active');
            if (videoActive) {
                showBackButton();
            }
        });
        
        // Détecte aussi le touchmove pour appareils tactiles
        document.addEventListener('touchmove', (e) => {
            const videoActive = document.getElementById('videoContainer').classList.contains('active');
            if (videoActive) {
                showBackButton();
            }
        });
        
        generateTiles();
    </script>
</body>
</html>
